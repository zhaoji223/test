!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("sa-sdk-javascript")):"function"==typeof define&&define.amd?define(["sa-sdk-javascript"],e):(t=t||self).sensors_data_utils=e(t.$sensors)}(this,(function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e={},n="";function r(t){u(t.target,"click")}function i(t){u(t.target,"blur")}function u(t,e){!1!==f(t)&&o(s(t),e,t.value)}function o(e,n,r){var i=c(n),u=a(e,n,r);i&&u&&function e(n,r,i){void 0===i&&(i=3);var u=t||window.sensors;if(u&&u.track){var o={$url:location.href,$referrer:document.referrer},a=Object.assign({},o,r);return void u.track(n,a)}var c=i-1;if(c<=0)return;setTimeout((function(){e(n,r,c)}),500)}(i,u)}function a(t,e,r){return"click"===e||"popup"===e?{FileName:t,FileValue:n,ExtraInfo:d()}:"blur"===e?{FileName:t,FileValue:r,ExtraInfo:d()}:void 0}function c(t){return"click"===t?"FileClick":"blur"===t?n:"popup"===t?"PopupTrack":"default"}function f(t){return!!t&&(!(!t.getAttribute||"function"!=typeof t.getAttribute)&&!!t.getAttribute("data-sa"))}function s(t){if(!t)throw new Error("Invalid argument");return t&&t.getAttribute?t.getAttribute("data-sa"):""}function l(t,n){t&&void 0!==n&&(e[t]=n)}function d(){return JSON.stringify(e)}return{init:function(t){if(!t)throw new Error("Invalid argument");n=t,e={},document.addEventListener("click",r),document.addEventListener("focusout",i)},set:l,update:function(t){for(var e in t)t.hasOwnProperty(e)&&l(e,t[e])},click:function(t){o(t,"click")},popup:function(t){o(t,"popup")},valueOf:function(){return e},toString:d,onClick:r,onBlur:i,getKey:function(){return n},isTargetElement:f,getElementKey:s,reportIfNecessary:u,getEventName:c,getEventData:a}}));
